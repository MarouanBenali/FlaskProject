{% extends 'base.html' %}

{% block title %}Modifier le profil{% endblock %}

{% block content %}

<div class="card">
    <h1 class="card-title">Modifier le profil</h1>
    
    <!-- Formulaire de modification du profil -->
    <form method="post" enctype="multipart/form-data" class="form">
        <!-- Tag caché CSRF pour la sécurité du formulaire -->
        {{ form.hidden_tag() }}
        
        <!-- Champ pour le nom d'utilisateur -->
        <div class="form-group">
            {{ form.username.label(class="form-label") }}
            {{ form.username(class="form-control") }}
            <!-- Affichage des erreurs de validation pour le nom d'utilisateur -->
            {% if form.username.errors %}
            <div class="invalid-feedback">
                {% for error in form.username.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Champ pour l'email -->
        <div class="form-group">
            {{ form.email.label(class="form-label") }}
            {{ form.email(class="form-control") }}
            <!-- Affichage des erreurs de validation pour l'email -->
            {% if form.email.errors %}
            <div class="invalid-feedback">
                {% for error in form.email.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Champs pour le prénom et le nom de famille -->
        <div class="form-row">
            <div class="form-group">
                {{ form.first_name.label(class="form-label") }}
                {{ form.first_name(class="form-control") }}
                <!-- Affichage des erreurs de validation pour le prénom -->
                {% if form.first_name.errors %}
                <div class="invalid-feedback">
                    {% for error in form.first_name.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <div class="form-group">
                {{ form.last_name.label(class="form-label") }}
                {{ form.last_name(class="form-control") }}
                <!-- Affichage des erreurs de validation pour le nom de famille -->
                {% if form.last_name.errors %}
                <div class="invalid-feedback">
                    {% for error in form.last_name.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Champ pour le numéro de téléphone -->
        <div class="form-group">
            {{ form.phone.label(class="form-label") }}
            {{ form.phone(class="form-control") }}
            <!-- Affichage des erreurs de validation pour le téléphone -->
            {% if form.phone.errors %}
            <div class="invalid-feedback">
                {% for error in form.phone.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Champ pour l'adresse -->
        <div class="form-group">
            {{ form.address.label(class="form-label") }}
            {{ form.address(class="form-control") }}
            <!-- Affichage des erreurs de validation pour l'adresse -->
            {% if form.address.errors %}
            <div class="invalid-feedback">
                {% for error in form.address.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Champ pour la biographie -->
        <div class="form-group">
            {{ form.bio.label(class="form-label") }}
            {{ form.bio(class="form-control", rows=3) }}
            <!-- Affichage des erreurs de validation pour la biographie -->
            {% if form.bio.errors %}
            <div class="invalid-feedback">
                {% for error in form.bio.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Champ pour l'image de profil -->
        <div class="form-group">
            {{ form.profile_image.label(class="form-label") }}
            {{ form.profile_image(class="form-control-file") }}
            <!-- Affichage des erreurs de validation pour l'image de profil -->
            {% if form.profile_image.errors %}
            <div class="invalid-feedback">
                {% for error in form.profile_image.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
            <!-- Affichage de l'image de profil actuelle si disponible -->
            {% if current_user.profile_image %}
               <img src="{{ url_for('static', filename='uploads/' + current_user.profile_image) }}" alt="Image de profil" class="profile-image">
            {% endif %}
        </div>
        
        <!-- Champs pour les liens sociaux -->
        <div class="form-group">
            {{ form.website.label(class="form-label") }}
            {{ form.website(class="form-control", placeholder="https://") }}
            <!-- Affichage des erreurs de validation pour le site web -->
            {% if form.website.errors %}
            <div class="invalid-feedback">
                {% for error in form.website.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.linkedin.label(class="form-label") }}
            {{ form.linkedin(class="form-control", placeholder="https://") }}
            <!-- Affichage des erreurs de validation pour le LinkedIn -->
            {% if form.linkedin.errors %}
            <div class="invalid-feedback">
                {% for error in form.linkedin.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.github.label(class="form-label") }}
            {{ form.github(class="form-control", placeholder="https://") }}
            <!-- Affichage des erreurs de validation pour le GitHub -->
            {% if form.github.errors %}
            <div class="invalid-feedback">
                {% for error in form.github.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.twitter.label(class="form-label") }}
            {{ form.twitter(class="form-control", placeholder="https://") }}
            <!-- Affichage des erreurs de validation pour le Twitter -->
            {% if form.twitter.errors %}
            <div class="invalid-feedback">
                {% for error in form.twitter.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        
        <!-- Bouton de soumission pour sauvegarder les modifications -->
        <div class="form-actions text-center">
            <button type="submit" class="btn">Sauvegarder</button>
        </div>
    </form>
</div>

{% endblock %}
